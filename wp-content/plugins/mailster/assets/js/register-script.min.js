jQuery(document).ready(function(d){var a=mailsterregisterL10n.wpnonce;d(".register_form_wrap").on("focus","input",function(){d(this).attr("data-placeholder",d(this).attr("placeholder"));d(this).attr("placeholder","")}).on("blur","input",function(){d(this).attr("placeholder",d(this).attr("data-placeholder"))}).on("click",".envato-signup",function(){b(this.href,600,900,"mailster_envato_signup");return false}).on("click",".howto-purchasecode",function(){b(this.href,600,350,"mailster_how_to_puchasecode");return false}).on("submit",".register_form",function(){var h=d(this),g=h.parent(),f=g.find("input.register-form-purchasecode").val(),e=g.find("input.register-form-slug").val();h.removeClass("has-error").prop("disabled",true);g.addClass("loading");c("register",{purchasecode:f,slug:e},function(i){h.prop("disabled",false);g.removeClass("loading");if(i.success){g.addClass("step-2").removeClass("step-1")}else{h.addClass("has-error").find(".error-msg").html(i.error)}},function(i,k,j){h.prop("disabled",false);g.removeClass("loading");alert(mailsterregisterL10n.error+"\n\n"+j)});return false}).on("submit",".register_form_2",function(){var h=d(this),g=h.parent(),f=g.find("input.register-form-purchasecode").val(),e=g.find("input.register-form-slug").val();h.removeClass("has-error").prop("disabled",true);g.addClass("loading");c("register",{purchasecode:f,slug:e,data:h.serialize()},function(i){h.prop("disabled",false);g.removeClass("loading");if(i.success){g.addClass("step-3").removeClass("step-2");d(document).trigger("verified."+e,[i.purchasecode,i.username,i.email])}else{if(i.code==406){h=g.find(".register_form");h.parent().removeClass("step-2").addClass("step-1")}h.addClass("has-error").find(".error-msg").html(i.error)}},function(i,k,j){h.prop("disabled",false);g.removeClass("loading");alert(mailsterregisterL10n.error+"\n\n"+j)});return false}).removeClass("loading");function b(f,h,o,k){var n=window.screenLeft!=undefined?window.screenLeft:screen.left,g=window.screenTop!=undefined?window.screenTop:screen.top,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,e=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,j=((i/2)-(h/2))+n,m=((e/2)-(o/2))+g,l=window.open(f,k,"scrollbars=auto,resizable=1,menubar=0,toolbar=0,location=0,directories=0,status=0, width="+h+", height="+o+", top="+m+", left="+j);if(window.focus){l.focus()}}function c(h,g,i,f,e){if(d.isFunction(g)){if(d.isFunction(i)){f=i}i=g;g={}}d.ajax({type:"POST",url:ajaxurl,data:d.extend({action:"mailster_"+h,_wpnonce:a},g),success:function(k,l,j){i&&i.call(this,k,l,j)},error:function(j,l,k){if(l=="error"&&!k){return}if(console){console.error(d.trim(j.responseText))}f&&f.call(this,j,l,k)},dataType:e?e:"JSON"})}window.verifyMailster=function(e,h,i,f){var g=d(".register_form_wrap-"+e);g.find("input.register-form-purchasecode").val(h);g.find("input.username").val(i);g.find("input.email").val(f);if(h){g.find(".register_form").parent().removeClass("step-1").addClass("step-2")}else{g.find(".register_form").submit()}}});